# 🌸 AstrBot 活跃成员抽老婆插件

基于 [AstrBot](https://github.com/Soulter/AstrBot) 的群聊互动插件。通过记录群内活跃成员（30天内发言的用户），实现随机抽取“今日老婆”的功能，并自动获取高清头像。

## ✨ 功能亮点

- **活跃筛选**：仅从 30 天内有发言记录的“活人”中抽取，自动过滤机器人与 ID 为 0 的异常账号。
- **头像展示**：抽取结果附带 640px 高清 QQ 头像，视觉体验更佳。
- **全局限额**：支持跨群全局记录上限（默认 500 条），达到上限自动清理旧数据，保护磁盘空间。
- **灵活管控**：支持 **群聊白名单** 和 **黑名单**，自由决定插件在哪些群生效。
- **历史回溯**：随时通过指令查看今日抽取历史和剩余抽取次数。

## 🎮 使用指令

| 指令 | 别称 | 权限 | 说明 |
| :--- | :--- | :--- | :--- |
| `/今日老婆` | `抽老婆` | 用户 | 随机抽取一名今日老婆 |
| `/我的老婆` | `抽取历史` | 用户 | 查看今天抽到的记录及次数 |
| `/重置记录` | - | 管理员 | 清空所有今日抽取记录 |
| `/抽老婆帮助` | `老婆插件帮助` | 用户 | 查看指令说明 |

## ⚙️ 配置项说明

在 AstrBot 管理面板或 `_conf_schema.json` 中可配置以下内容：

| 配置键 | 类型 | 默认值 | 说明 |
| :--- | :--- | :--- | :--- |
| `daily_limit` | int | 3 | 每人每天可抽取的次数上限 |
| `max_records` | int | 500 | 全局 JSON 存储的最大记录条数 |
| `excluded_users` | list | [] | 永远不会被抽中的 QQ 号列表 |
| `whitelist_groups`| list | [] | 白名单模式：仅在此列表中的群生效 |
| `blacklist_groups`| list | [] | 黑名单模式：列表中的群将禁用插件 |
